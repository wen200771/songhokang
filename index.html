<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>送齁康 - 優惠券折價券平台</title>
    <meta name="description" content="送齁康 - 台灣優惠券與折價券平台，精選美食、購物、娛樂、旅遊等多元優惠，輕鬆搜尋收藏，一鍵查看詳情。">
    <link rel="canonical" href="http://localhost:8000/">
    <meta name="robots" content="index,follow">
    <!-- Open Graph -->
    <meta property="og:title" content="送齁康 - 優惠券折價券平台">
    <meta property="og:description" content="精選各類熱門優惠，支援搜尋、分類與收藏，找好康更快速。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://localhost:8000/">
    <meta property="og:image" content="http://localhost:8000/img/送齁康文宣素材 (1).jpg">
    <meta property="og:locale" content="zh_TW">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="送齁康 - 優惠券折價券平台">
    <meta name="twitter:description" content="精選各類熱門優惠，支援搜尋、分類與收藏。">
    <meta name="twitter:image" content="http://localhost:8000/img/送齁康文宣素材 (1).jpg">
    <link rel="icon"
        href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiByeD0iMTAiIGZpbGw9IiNGQ0EzMTEiLz4KPHRleHQgeD0iNTAiIHk9IjU1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMzAiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+U0g8L3RleHQ+Cjwvc3ZnPg==">
    <link rel="preload" href="css/main.css" as="style">
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <!-- Pinterest 風格頂部導航欄 -->
    <header class="header">
        <div class="nav-container">
            <button class="hamburger-btn" id="hamburgerBtn" aria-label="開啟選單" aria-expanded="false">☰</button>
            <div class="search-container">
                <div class="search-icon">🔍</div>
                <div class="search-input-wrapper" id="searchWrapper">
                    <div class="selected-tags" id="selectedTags"></div>
                    <input type="text" class="search-box" placeholder="搜尋優惠券、店家或分類..." id="searchInput"
                        aria-label="搜尋優惠券、店家或分類" autocomplete="on">
                </div>
                <button class="filter-toggle-btn" id="filterToggleBtn" title="進階篩選">⚙️</button>
                <div class="search-dropdown" id="searchDropdown">
                    <!-- 搜尋紀錄 -->
                    <div class="search-section" id="searchHistorySection">
                        <h3 class="search-section-title">搜尋紀錄</h3>
                        <div class="search-history" id="searchHistory">
                            <!-- 動態生成的搜尋紀錄項目 -->
                        </div>
                    </div>

                    <!-- 熱門搜尋 -->
                    <div class="search-section">
                        <h3 class="search-section-title">熱門搜尋</h3>
                        <div class="trending-tags">
                            <div class="trending-tag" data-tag="美食優惠">美食優惠</div>
                            <div class="trending-tag" data-tag="限時特賣">限時特賣</div>
                            <div class="trending-tag" data-tag="買一送一">買一送一</div>
                            <div class="trending-tag" data-tag="新店開幕">新店開幕</div>
                        </div>
                    </div>

                    <!-- 分類瀏覽 -->
                    <div class="search-section">
                        <h3 class="search-section-title">分類瀏覽</h3>
                        <div class="category-grid" id="searchCategoryGrid"></div>
                    </div>

                </div>

                <!-- 進階篩選面板 -->
                <div class="filter-panel" id="filterPanel" style="display: none;">
                    <div class="filter-content">
                        <div class="filter-header">
                            <h3>🔍 進階篩選</h3>
                            <button class="filter-close" onclick="closeFilterPanel()">×</button>
                        </div>

                        <!-- 分類篩選 -->
                        <div class="filter-group">
                            <label class="filter-label">分類</label>
                            <div class="filter-options" id="categoryFilters"></div>
                        </div>

                        <!-- 快速篩選（標籤） -->
                        <div class="filter-group">
                            <label class="filter-label">快速篩選</label>
                            <div class="filter-options" id="quickFilters"></div>
                        </div>

                        <!-- 地區 -->
                        <div class="filter-group">
                            <label class="filter-label">地區</label>
                            <div class="filter-options" id="regionFilters"></div>
                        </div>

                        <!-- 到期時間 -->
                        <div class="filter-group">
                            <label class="filter-label">到期時間</label>
                            <div class="filter-options">
                                <label class="filter-radio">
                                    <input type="radio" name="expiry" value="all" checked> 全部
                                </label>
                                <label class="filter-radio">
                                    <input type="radio" name="expiry" value="week"> 一週內到期
                                </label>
                                <label class="filter-radio">
                                    <input type="radio" name="expiry" value="month"> 一個月內到期
                                </label>
                                <label class="filter-radio">
                                    <input type="radio" name="expiry" value="future"> 長期有效
                                </label>
                            </div>
                        </div>

                        <!-- 排序選項 -->
                        <div class="filter-group">
                            <label class="filter-label">排序方式</label>
                            <select id="sortSelect" class="filter-select">
                                <option value="default">預設排序</option>
                                <option value="newest">最新優惠</option>
                                <option value="expiry">即將到期</option>
                                <option value="popular">最受歡迎</option>
                                <option value="category">依分類排序</option>
                            </select>
                        </div>

                        <!-- 操作按鈕 -->
                        <div class="filter-actions">
                            <button class="btn-secondary" onclick="clearAllFilters()">清除篩選</button>
                            <button class="btn-primary" onclick="applyAdvancedFilters()">套用篩選</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="user-menu">
                <button class="login-btn" title="登入" id="loginIconBtn">👤</button>
            </div>
            <div class="role-menu" id="roleMenu">
                <button class="role-item" data-role="customer">一般用戶</button>
                <button class="role-item" data-role="vendor">廠商後台</button>
                <button class="role-item" data-role="admin">管理後台</button>
            </div>
        </div>
    </header>

    <!-- 行動裝置遮罩 -->
    <div id="backdrop" style="position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;z-index:998;"></div>

    <!-- 優化後的左側邊欄 -->
    <aside class="sidebar">
        <button id="sidebarCloseBtn" class="sidebar-close-btn" aria-label="關閉側邊欄">×</button>
        <!-- Logo 區塊 -->
        <div class="sidebar-logo">
            <a href="#" class="logo">送齁康</a>
        </div>



        <!-- 可滾動的主要內容 -->
        <div class="sidebar-content">
            <!-- 主要功能區塊 -->
            <div class="sidebar-section">
                <div class="sidebar-item active" data-action="home">
                    <span class="sidebar-icon">🏠</span>
                    <span class="sidebar-text">首頁</span>
                </div>
                <div class="sidebar-item" data-action="favorites">
                    <span class="sidebar-icon">❤️</span>
                    <span class="sidebar-text">我的收藏</span>
                    <span class="sidebar-count" id="favCount" style="display:none;"></span>
                </div>
                <div class="sidebar-item" data-action="history">
                    <span class="sidebar-icon">🕒</span>
                    <span class="sidebar-text">瀏覽記錄</span>
                    <span class="sidebar-count" id="historyCount" style="display:none;"></span>
                </div>
            </div>

            <div class="sidebar-divider"></div>

            <!-- 推薦功能區塊 -->
            <div class="sidebar-section">
                <div class="sidebar-item" data-action="hot">
                    <span class="sidebar-icon">🔥</span>
                    <span class="sidebar-text">熱門優惠</span>
                    <span class="sidebar-count" id="hotCount" style="display:none;"></span>
                </div>
                <div class="sidebar-item" data-action="nearby">
                    <span class="sidebar-icon">📍</span>
                    <span class="sidebar-text">附近優惠</span>
                    <span class="sidebar-count" id="nearbyCount" style="display:none;"></span>
                </div>
                <div class="sidebar-item" data-action="limited">
                    <span class="sidebar-icon">⏰</span>
                    <span class="sidebar-text">限時活動</span>
                    <span class="sidebar-count" id="limitedCount" style="display:none;"></span>
                </div>
            </div>

        </div>

        <!-- 底部設定區塊 -->
        <div class="sidebar-footer">
            <div class="sidebar-item" data-action="settings">
                <span class="sidebar-icon">⚙️</span>
                <span class="sidebar-text">設定</span>
            </div>
            <div class="sidebar-item" data-action="help">
                <span class="sidebar-icon">❓</span>
                <span class="sidebar-text">幫助中心</span>
            </div>
        </div>
    </aside>

    <!-- 主要內容 -->
    <main class="main-content">
        <!-- 智能推薦區塊 -->
        <div class="recommendation-section" id="recommendationSection">
            <!-- 分類導航 -->
            <div class="category-nav-container">
                <div class="category-nav" id="categoryNav">
                    <div class="category-item active" data-category="all">
                        <span class="category-icon">🎯</span>
                        <span class="category-text">全部</span>
                    </div>
                    <div class="category-item" data-category="熱門">
                        <span class="category-icon">🔥</span>
                        <span class="category-text">熱門</span>
                    </div>
                    <div class="category-item" data-category="即將到期">
                        <span class="category-icon">⏰</span>
                        <span class="category-text">即將到期</span>
                    </div>
                    <div class="category-item" data-category="新上架">
                        <span class="category-icon">✨</span>
                        <span class="category-text">新上架</span>
                    </div>
                    <div class="category-item" data-category="美食餐飲">
                        <span class="category-icon">🍽️</span>
                        <span class="category-text">美食</span>
                    </div>
                    <div class="category-item" data-category="購物商城">
                        <span class="category-icon">🛍️</span>
                        <span class="category-text">購物</span>
                    </div>
                    <div class="category-item" data-category="美容保養">
                        <span class="category-icon">💄</span>
                        <span class="category-text">美容</span>
                    </div>
                    <div class="category-item" data-category="休閒娛樂">
                        <span class="category-icon">🎮</span>
                        <span class="category-text">娛樂</span>
                    </div>
                    <div class="category-item" data-category="旅遊住宿">
                        <span class="category-icon">✈️</span>
                        <span class="category-text">旅遊</span>
                    </div>
                </div>
            </div>

            <!-- 推薦標題區 -->
            <div class="recommendation-header" id="recommendationHeader">
                <h2 class="recommendation-title">🎯 為您推薦</h2>
                <p class="recommendation-subtitle">根據您的瀏覽偏好精選優惠</p>
            </div>

            <!-- 特色推薦卡片（輪播） -->
            <div class="featured-section" id="featuredSection">
                <button class="carousel-btn prev" id="carouselPrev">‹</button>
                <div class="featured-container" id="featuredContainer">
                    <!-- 將由 JavaScript 動態生成 -->
                </div>
                <button class="carousel-btn next" id="carouselNext">›</button>
            </div>
            <div class="carousel-indicators" id="carouselIndicators">
                <!-- 指示點將由 JavaScript 動態生成 -->
            </div>
        </div>

        <!-- 主要內容區 -->
        <div class="main-section">
            <div class="section-header">
                <h3 class="section-title" id="mainSectionTitle">所有優惠</h3>
                <div class="view-toggle" id="viewToggle">
                    <button class="view-btn active" data-view="grid">
                        <span>⊞</span>
                    </button>
                    <button class="view-btn" data-view="list">
                        <span>☰</span>
                    </button>
                </div>
            </div>
            <div class="masonry-container" id="masonryContainer">
                <!-- 優惠券卡片將由 JavaScript 動態生成 -->
            </div>
        </div>
    </main>

    <!-- 彈窗 -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">×</button>
            <div class="modal-left">
                <picture id="modalPicture">
                    <source id="modalSourceWebp" type="image/webp">
                    <img src="" alt="優惠券" class="modal-image" id="modalImage" width="900" height="1200" decoding="async"
                        loading="lazy">
                </picture>
            </div>
            <div class="modal-right">
                <div class="store-info">
                    <h2 class="store-name" id="storeName">店家名稱</h2>
                    <p class="store-category" id="storeCategory">美食餐飲</p>
                </div>
                <h3 class="offer-title" id="offerTitle">優惠活動標題</h3>
                <p class="offer-description" id="offerDescription">
                    優惠活動詳細說明，包含使用條件、適用範圍等資訊。
                </p>
                <div class="offer-details">
                    <div class="detail-item">
                        <span class="detail-label">優惠期限</span>
                        <span class="detail-value" id="offerExpiry">2024/12/31</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">使用次數</span>
                        <span class="detail-value" id="offerUsage">每人限用一次</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">店家地址</span>
                        <span class="detail-value" id="storeAddress">台北市信義區信義路五段7號</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">聯絡電話</span>
                        <span class="detail-value" id="storePhone">02-2345-6789</span>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn-primary" onclick="useCoupon(currentCoupon)">立即使用</button>
                    <button class="btn-secondary" onclick="toggleFavoriteFromModal()">收藏優惠</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 影像燈箱 -->
    <div class="modal-overlay" id="lightboxOverlay" style="background: rgba(0,0,0,0.95); display: none; z-index: 3000;">
        <button class="modal-close" id="lightboxClose" style="background: rgba(255,255,255,0.2);">×</button>
        <div
            style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; cursor: zoom-out;">
            <img id="lightboxImage" alt="預覽" style="max-width: 95vw; max-height: 95vh; object-fit: contain;">
        </div>
    </div>

    <!-- 登入/註冊彈窗 -->
    <div class="modal-overlay" id="authOverlay" style="display: none;">
        <div class="modal-content" style="max-width: 560px;">
            <button class="modal-close" id="authClose">×</button>
            <div style="flex:1; padding: 28px; overflow-y:auto;">
                <h2 style="margin-bottom: 12px;">會員中心</h2>
                <div style="display:flex; gap:8px; margin-bottom:16px;">
                    <button id="tabLogin" class="btn-secondary" style="flex:1;">登入</button>
                    <button id="tabRegister" class="btn-secondary" style="flex:1;">註冊</button>
                </div>
                <form id="loginForm" style="display:block;">
                    <div style="display:flex; flex-direction:column; gap:10px;">
                        <input id="loginUsername" type="text" placeholder="用戶名或Email"
                            style="padding:10px; border-radius:10px; border:1px solid #ddd;" aria-label="用戶名或Email"
                            autocomplete="username">
                        <input id="loginPassword" type="password" placeholder="密碼"
                            style="padding:10px; border-radius:10px; border:1px solid #ddd;" aria-label="密碼"
                            autocomplete="current-password">
                        <button type="submit" class="btn-primary">登入</button>
                    </div>
                </form>
                <form id="registerForm" style="display:none;">
                    <div style="display:flex; flex-direction:column; gap:10px;">
                        <input id="regUsername" type="text" placeholder="用戶名"
                            style="padding:10px; border-radius:10px; border:1px solid #ddd;" aria-label="用戶名"
                            autocomplete="username">
                        <input id="regEmail" type="email" placeholder="Email"
                            style="padding:10px; border-radius:10px; border:1px solid #ddd;" aria-label="Email"
                            autocomplete="email">
                        <input id="regPassword" type="password" placeholder="密碼(≥6位)"
                            style="padding:10px; border-radius:10px; border:1px solid #ddd;" aria-label="密碼"
                            autocomplete="new-password">
                        <input id="regPassword2" type="password" placeholder="確認密碼"
                            style="padding:10px; border-radius:10px; border:1px solid #ddd;" aria-label="確認密碼"
                            autocomplete="new-password">
                        <input id="regPhone" type="text" placeholder="手機(選填)"
                            style="padding:10px; border-radius:10px; border:1px solid #ddd;" aria-label="手機"
                            autocomplete="tel">
                        <div id="vendorFields" style="display:none;">
                            <input id="regCompany" type="text" placeholder="公司名稱(廠商必填)"
                                style="padding:10px; border-radius:10px; border:1px solid #ddd; margin-top:6px;"
                                aria-label="公司名稱" autocomplete="organization">
                        </div>
                        <button type="submit" class="btn-primary">建立帳號</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>

</html>